<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†ØªØ§Ø¦Ø¬ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù† 2026</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

body{
    margin:0;
    font-family:'Cairo',sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:#fff;
    text-align:center;
}
.container{
    max-width:900px;
    margin:30px auto;
    padding:20px;
}
.card{
    background:rgba(255,255,255,0.1);
    border-radius:22px;
    padding:25px;
    margin-top:30px;
    animation:fade 1.3s ease;
}
h1,h2,h3{text-align:center}
input,button{
    width:100%;
    padding:14px;
    margin-top:15px;
    border:none;
    border-radius:14px;
    font-size:16px;
}
button{
    background:#ffd166;
    font-weight:bold;
    cursor:pointer;
}
button:hover{background:#ffe08a}
.hidden{display:none}
.loader{
    text-align:center;
    font-size:24px;
    animation:pulse 1.2s infinite;
}
table{
    width:100%;
    margin-top:20px;
    border-collapse:collapse;
}
th,td{
    padding:8px;
    border-bottom:1px solid rgba(255,255,255,.2);
    text-align:center;
}
th{
    background:rgba(255,209,102,.8);
    color:#000;
}
.badge{
    background:#ffd166;
    color:#000;
    padding:8px 18px;
    border-radius:20px;
    display:inline-block;
    margin:10px auto;
    font-weight:bold;
}
@keyframes fade{
    from{opacity:0;transform:translateY(25px)}
    to{opacity:1}
}
@keyframes pulse{
    0%{opacity:.3}
    50%{opacity:1}
    100%{opacity:.3}
}
</style>
</head>

<body>
<div class="container">

<h1>ğŸŒ™ Ù†ØªØ§Ø¦Ø¬ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù† 2026 ğŸŒ™</h1>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div class="card" id="loginBox">
    <h2>Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ</h2>
    <input id="uid" placeholder="Ù…Ø«Ø§Ù„: 1234">
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <button onclick="openAdmin()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
    <p id="err" style="color:#ffb4b4"></p>
</div>

<!-- ØªØ­Ù…ÙŠÙ„ -->
<div class="card hidden" id="loading">
    <div class="loader">â³ ÙŠØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù†ØªØ§Ø¦Ø¬...</div>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ -->
<div class="card hidden" id="resultBox">
    <h2 id="name"></h2>
    <div id="rank"></div>
    <h3 id="total"></h3>
    <p id="msg" style="font-size:18px"></p>

    <table>
        <thead>
            <tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ø¹Ù„Ø§Ù…Ø©</th></tr>
        </thead>
        <tbody id="days"></tbody>
    </table>

    <button onclick="logout()">Ø®Ø±ÙˆØ¬</button>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div class="card hidden" id="adminBox">
    <h2>ğŸ” Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
    <input id="adminPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø£Ø¯Ù…Ù†">
    <button onclick="loginAdmin()">Ø¯Ø®ÙˆÙ„</button>
    <p id="adminErr" style="color:#ffb4b4"></p>

    <div id="adminContent" class="hidden">
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                    <th>Ø§Ù„Ø±Ù‚Ù…</th>
                    <th colspan="30">Ù†Ù‚Ø§Ø· Ø§Ù„Ø£ÙŠØ§Ù…</th>
                    <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
                </tr>
            </thead>
            <tbody id="adminTable"></tbody>
        </table>
        <button onclick="saveData()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
        <button onclick="logout()">Ø®Ø±ÙˆØ¬</button>
    </div>
</div>

</div>

<script>
const adminPassword="2026";

const defaultPlayers=[
 {name:"Ø±ÙŠÙ†ÙŠÙ‡",id:4831,scores:Array(30).fill(0)},
 {name:"Ù„Ø§Ù†Ø§",id:9274,scores:Array(30).fill(0)},
 {name:"Ø§ÙˆØ²ÙŠ",id:6158,scores:Array(30).fill(0)},
 {name:"Ù†ÙˆØ±",id:3029,scores:Array(30).fill(0)},
 {name:"ÙØ§ØªÙ†",id:7642,scores:Array(30).fill(0)},
 {name:"Ù‡Ù†Ø§Ø¡",id:5901,scores:Array(30).fill(0)},
 {name:"Ø§Ù…ÙŠÙ†",id:8417,scores:Array(30).fill(0)}
];
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyA1r4-BA1rm3-hcdvqltN_EiD0HIPgpBnw",
  authDomain: "ramadan-2026-a7be6.firebaseapp.com",
  projectId: "ramadan-2026-a7be6",
  storageBucket: "ramadan-2026-a7be6.firebasestorage.app",
  messagingSenderId: "368474480340",
  appId: "1:368474480340:web:d86e70486ef97f4387a541",
  measurementId: "G-E3JNST1E0Y"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
let players=JSON.parse(localStorage.getItem("ramadan2026"))||defaultPlayers;
let current=null;

function saveData(){
 firebase.setItem("ramadan2026",JSON.stringify(players));
 alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ù†Ø¬Ø§Ø­");
}

function login(){
 const id=parseInt(uid.value);
 const p=players.find(x=>x.id===id);
 if(!p){err.innerText="Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± ØµØ­ÙŠØ­";return;}
 loginBox.classList.add("hidden");
 loading.classList.remove("hidden");
 setTimeout(()=>{
   loading.classList.add("hidden");
   resultBox.classList.remove("hidden");
   current=p;
   showPlayer();
 },2000);
}

function showPlayer(){
 name.innerText=current.name+" â€¢ "+current.id;
 const sum=current.scores.reduce((a,b)=>a+b,0);
 total.innerText=`Ù…Ø¬Ù…ÙˆØ¹Ùƒ: ${sum} Ù†Ù‚Ø·Ø©`;
 msg.innerText="ğŸŒŸ Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒØŒ Ø¬Ù‡Ø¯Ùƒ Ù…Ø­Ù„ ØªÙ‚Ø¯ÙŠØ±";

 days.innerHTML="";
 current.scores.forEach((s,i)=>{
   days.innerHTML+=`<tr><td>${i+1}</td><td>${s}</td></tr>`;
 });
}

function openAdmin(){
 loginBox.classList.add("hidden");
 adminBox.classList.remove("hidden");
}

function loginAdmin(){
 if(adminPass.value!==adminPassword){
   adminErr.innerText="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
   return;
 }
 adminContent.classList.remove("hidden");
 renderAdmin();
}

function renderAdmin(){
 adminTable.innerHTML="";
 players.forEach((p,pi)=>{
   let row=`<tr><td>${p.name}</td><td>${p.id}</td>`;
   p.scores.forEach((s,si)=>{
     row+=`<td><input type="number" value="${s}" style="width:45px"
       onchange="players[${pi}].scores[${si}]=Number(this.value)"></td>`;
   });
   row+=`<td>${p.scores.reduce((a,b)=>a+b,0)}</td></tr>`;
   adminTable.innerHTML+=row;
 });
}

function logout(){
 location.reload();
}
</script>

<!-- ğŸ”¥ Ø¥Ø¶Ø§ÙØ© Firebase Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† ÙÙŠ Ø¢Ø®Ø± Ø§Ù„ÙƒÙˆØ¯ -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

// Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù…Ù† Firebase Ù‡Ù†Ø§
const firebaseConfig = {
  apiKey: "PUT_API_KEY",
  authDomain: "PUT_DOMAIN",
  databaseURL: "PUT_DATABASE_URL",
  projectId: "PUT_PROJECT_ID",
  storageBucket: "PUT_BUCKET",
  messagingSenderId: "PUT_ID",
  appId: "PUT_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„ØµÙØ­Ø© ØªÙØªØ­
async function loadOnlineData() {
  try {
    const snapshot = await get(ref(db, "ramadan2026/players"));
    if (snapshot.exists()) {
      players = snapshot.val();
    }
  } catch (e) {
    console.log("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†:", e);
  }
}
loadOnlineData();

// Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ø¨Ø¯Ù„ localStorage
async function saveOnlineData() {
  try {
    await set(ref(db, "ramadan2026/players"), players);
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©!");
  } catch (e) {
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†");
    console.log(e);
  }
}

// ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­ÙØ¸ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†
saveData = saveOnlineData;
</script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

// Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù…Ù† Firebase Ù‡Ù†Ø§
const firebaseConfig = {
  apiKey: "PUT_API_KEY",
  authDomain: "PUT_DOMAIN",
  databaseURL: "PUT_DATABASE_URL",
  projectId: "PUT_PROJECT_ID",
  storageBucket: "PUT_BUCKET",
  messagingSenderId: "PUT_ID",
  appId: "PUT_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let onlineLoaded = false;

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ù‚Ø¨Ù„ Ø£ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù…
async function loadOnlineData() {
  try {
    const snapshot = await get(ref(db, "ramadan2026/players"));
    if (snapshot.exists()) {
      players = snapshot.val(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    }
  } catch (e) {
    console.log("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†:", e);
  } finally {
    onlineLoaded = true;
  }
}
await loadOnlineData(); // Ù…Ù‡Ù… Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø¨Ù„ Ø£ÙŠ ØªÙØ§Ø¹Ù„

// ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© login Ø¹Ø´Ø§Ù† ØªÙ†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
const originalLogin = login;
login = function() {
  if (!onlineLoaded) {
    alert("â³ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†");
    return;
  }
  originalLogin();
}

// Ø¯Ø§Ù„Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ø¨Ø¯Ù„ localStorage
async function saveOnlineData() {
  try {
    await set(ref(db, "ramadan2026/players"), players);
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©!");
  } catch (e) {
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†");
    console.log(e);
  }
}

// Ø§Ø³ØªØ¨Ø¯Ø§Ù„ saveData Ø¨Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†
saveData = saveOnlineData;
</script>
</body>
</html>